New VoodooPS2Trackpad emulates Magic Trackpad using Apple driver instead of handling all gestures itself. It allows to use any one-, two- and three-finger gestures defined by Apple:
* Поиск и детекторы данных
* Имитация правой кнопки (двумя пальцами, в левом углу\*, в правом углу\*)
* Касание для имитации нажатия
* Прокрутка двумя пальцами
* Увеличение или уменьшение масштаба
* Смарт-масштабирование
* Поворот
* Смахивание между страницами
* Смахивание в режиме полного экрана (только тремя пальцами)
* Центр уведомлений
* Mission Control (только тремя пальцами)
* Программа Exposé (только тремя пальцами)
* Перетягивание с фиксацией или без фиксации (настраивается в панели «Универсальный доступ»)
* Перетягивание тремя пальцами (настраивается в панели «Универсальный доступ», может работать ненадёжно\*\*)

It also should support BetterTouchTool (not tested).

Также поддерживаются режимы имитации Force Touch (настраиваются в Info.plist):
* Mode 0 – имитация Force Touch отключена (можно выключить и в Системных настройках).
* Mode 1 – физическая кнопка: на тачпадах, у которых физическая кнопка находится под дном (т. е. можно нажимать в любом месте), её можно переназначить на Force Touch, т. е. касание (тап) – это обычное нажатие (если включен жест «Касание для имитации нажатия»), а клик – это Force Touch. Этот режим удобен тем, кто не пользуется физической кнопкой для клика.
* Mode 2 – «широкое нажатие»: для имитации Force Touch нужно увеличить площадь пальца, касающуюся тачпада\*\*\*. Необходимая ширина задаётся в Info.plist. 
* Mode 3 shouldn't be used.

# Credits:
VoodooPS2Controller etc. – turbo, mackerintel, @RehabMan, nhand42, phb, Chunnan, jape, bumby (see RehabMan's repository).
Magic Trackpad 2 reverse engineering and implementation – https://github.com/alexandred/VoodooI2C project team.
VoodooPS2Trackpad integration – @kprinssu.
Force Touch emulation and finger renumbering algorithm** - @usr-sse2.

\* На моем тачпаде со старым VoodooPS2Trackpad этот жест было практически невозможно выполнить (вместо этого просто перемещался курсор), теперь работает хорошо.
\*\* Тачпад Synaptics из-за ограничений шины PS/2 передаёт драйверу количество пальцев и координаты двух из них. При этом в момент, когда на тачпаде находятся два пальца, и добавляется третий, может происходить «скачок» – координаты одного из пальцев заменяются на координаты нового пальца. Алгоритм оценивает близость со старыми координатами, чтобы скрыть этот «скачок» от системы и вычислить примерное положение «скрытого» пальца, предполагая, что пальцы движутся по тачпаду параллельно друг другу.
\*\*\* Тачпад вообще-то умеет отслеживать как ширину пальца (в диапазоне от 4 до 15), так и силу нажатия (в диапазоне от 0 до 255), но на практике измеряемая ширина пальца почти всегда одна и та же (4), а сила нажатия зависит от реальной площади пальца, а не от давления.
